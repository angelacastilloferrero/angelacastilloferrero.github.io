<!DOCTYPE html>
<html lang='en'>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.6">

    <title>ANGELA QUÉ HACES</title>

    <link rel="icon" href="assets/Iconfactory-Copland-5-A-rose-for-K..32.png">
    <link rel="stylesheet" type="text/css" href="style.css"> 

    <style>
        /* CONFIGURACIÓN BASE Y ANCHO TOTAL */
        body {
            position: relative; 
            overflow: hidden; 
            background-size: cover;
            background-repeat: no-repeat;
            
            font-family: Arial, sans-serif;
            line-height: 1.5;
            font-size: 1em;
            margin: 15;
            padding-bottom: 0; 
            height: 100vh; 
        }

        /* EL CONTENEDOR OCUPA EL 100% DEL ANCHO */
        .container {
            max-width: 100%;
            width: 100%;
            margin: 0px 0;
            padding: 10px;
        }

        /* ESTILOS DE ENLACES */
        a {
            color: #0000ff;
            letter-spacing: -0.3px;
            text-decoration: underline;
        }
        
        .wavy-underline {
            text-decoration-style: wavy;
        }
        
        /* CABECERA Y CONTACTO (ALINEACIÓN DERECHA) */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: 100%;
            margin-bottom: 40px;
        }

        .main-info p {
            margin: 0;
        }

        .contact-info {
            text-align: right;
            line-height: 1.5;
        }
        
        .contact-info p {
             color: #0000ff;
             font-size: 1em;
             margin: 0;
             white-space: nowrap; 
        }
        
        /* ESTILO PARA LA LÍNEA DIVISORIA */
        hr.project-divider {
            border: none;
            border-top: 1px solid #ccc; 
            margin: 40px 0;
        }
        
        /* === ESTILOS PARA LAS VENTANAS FLOTANTES === */
        
        .highlights-title {
            font-size: 1.8em;
            margin-bottom: 20px;
        }
        
        .window {
            position: absolute; 
            
            /* Eliminamos 'aspect-ratio' de CSS, el JS lo maneja al inicio */
            
            min-width: 150px; 
            min-height: 100px;
            
            background-color: #f0f0f0; 
            border: 1px solid #333;
            box-shadow: 5px 5px 0px #888; 
            z-index: 100;
            
            resize: none; 
            overflow: hidden; 
            cursor: pointer; 
        }

        .window-header {
            cursor: move; 
            background-color: #ccc;
            color: #000;
            padding: 5px 10px;
            font-weight: bold;
            border-bottom: 1px solid #333;
            user-select: none;
        }

        .window-body {
            padding: 5px;
            /* Usamos una altura dinámica con Flexbox/Grid o calculada por JS */
            height: calc(100% - 31px); 
            overflow: hidden; 
            cursor: move; 
        }

        .window-body img {
            display: block;
            width: 100%;
            height: 100%; 
            /* CLAVE: Usamos 'cover' para asegurar que no haya bordes (el JS se encarga de que las proporciones coincidan) */
            object-fit: cover; 
        }
        
        /* Asa para redimensionar */
        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 15px;
            height: 15px;
            background: #333;
            cursor: nwse-resize; 
            z-index: 10;
        }

        .active-drag, .active-resize {
            z-index: 1000;
        }
        /* ============================================== */

    </style>

</head>

<body>
    <main class="container">

        <header class="header">
            <div class="main-info">
                <a href="https://www.instagram.com/angelaquehaces" target="_blank">Ángela Castillo Ferrero</a>
                <p>Jewelry / Fashion Accessories designer</p>
                <p>Based in Barcelona</p>
                <p>Full PDF available upon <u class="wavy-underline">request</u></p>
            </div>

            <div class="contact-info">
                <p>castillofereroangela(at)gmail(dot)com +34 686 646 684</p>
            </div>
        </header>
        
        <hr class="project-divider">
        
        <h2 class="highlights-title">Highlights Lately</h2>
        
        <div class="highlights-container">
            
            <div class="highlight-item window" id="item-1" style="top: 100px; left: 20px;">
                <div class="window-header">Twist Capsule I</div>
                <div class="window-body">
                    <img 
                        src="https://d2w9rnfcy7mm78.cloudfront.net/40812628/original_172a35df3b3170e2a010826f4a9fe9b0.png?1762184347?bc=0" 
                        alt="Destacado 1: Twist Capsule">
                </div>
                <div class="resize-handle"></div>
            </div>

            <div class="highlight-item window" id="item-2" style="top: 250px; left: 35%;">
                <div class="window-header">Twist Capsule II</div>
                <div class="window-body">
                    <img 
                        src="https://d2w9rnfcy7mm78.cloudfront.net/40812625/original_85f18373dedff59799d870842540b485.png?1762184345?bc=0" 
                        alt="Destacado 2: Twist Capsule">
                </div>
                <div class="resize-handle"></div>
            </div>

            <div class="highlight-item window" id="item-3" style="top: 400px; left: 65%;">
                <div class="window-header">Twist Capsule III</div>
                <div class="window-body">
                    <img 
                        src="https://d2w9rnfcy7mm78.cloudfront.net/40812631/original_19f7e92dfe38cfa2b98cf28f4ba0f9c4.png?1762184353?bc=0" 
                        alt="Destacado 3: Twist Capsule">
                </div>
                <div class="resize-handle"></div>
            </div>

            <div class="highlight-item window" id="item-4" style="top: 50px; left: 500px;">
                <div class="window-header">Project Placeholder IV</div>
                <div class="window-body">
                    <img 
                        src="https://via.placeholder.com/400x400" 
                        alt="Placeholder 4">
                </div>
                <div class="resize-handle"></div>
            </div>

            <div class="highlight-item window" id="item-5" style="top: 550px; left: 100px;">
                <div class="window-header">Project Placeholder V</div>
                <div class="window-body">
                    <img 
                        src="https://via.placeholder.com/600x400" 
                        alt="Placeholder 5">
                </div>
                <div class="resize-handle"></div>
            </div>

        </div>
        </main>

    <footer class="footer container">
        <p class="last-updated" style="text-align: right;">last updated: 03/nov/25</p>
    </footer>
    
    <script>
        const draggableElements = document.querySelectorAll('.window');
        
        let activeItem = null; 
        let isResizing = false;
        
        let currentX, currentY; 
        let initialX, initialY;
        let xOffset, yOffset; 
        
        let initialWidth, initialHeight; 
        let initialRatio; // La proporción de aspecto dinámica

        let highestZIndex = 100;

        // Función de inicialización para establecer el tamaño y la proporción
        function initializeWindow(windowElement) {
            const img = windowElement.querySelector('img');
            
            // Usamos un evento para asegurar que la imagen se haya cargado completamente
            // y obtener sus dimensiones reales.
            if (img && img.complete) {
                // La imagen ya está cargada
                setInitialDimensions(windowElement, img);
            } else if (img) {
                // Esperar a que la imagen cargue
                img.onload = () => setInitialDimensions(windowElement, img);
            }
        }

        function setInitialDimensions(windowElement, img) {
            // Dimensiones deseadas al inicio (puedes ajustar el ancho inicial aquí)
            const targetWidth = 300; 
            
            // 1. Calcular la proporción de la imagen
            const ratio = img.naturalWidth / img.naturalHeight;
            
            // 2. Establecer el alto y ancho inicial del contenedor (window)
            const targetHeight = targetWidth / ratio;
            
            windowElement.style.width = targetWidth + 'px';
            // Ajustamos el alto sumando la altura del header (aproximadamente 31px)
            windowElement.style.height = (targetHeight + 31) + 'px';

            // 3. Almacenar la proporción en un atributo para el redimensionamiento
            windowElement.setAttribute('data-aspect-ratio', ratio);
        }

        // 1. Configuración de escuchadores de eventos
        draggableElements.forEach(item => {
            const resizeHandle = item.querySelector('.resize-handle');
            
            // Inicializar cada ventana al cargar
            initializeWindow(item);
            
            // Arrastre (en toda la ventana)
            item.addEventListener('mousedown', startInteraction);
            item.addEventListener('touchstart', startInteraction); 
            
            // Redimensión (Handle)
            if (resizeHandle) {
                resizeHandle.addEventListener('mousedown', resizeStart);
                resizeHandle.addEventListener('touchstart', resizeStart);
            }
        });

        // Eventos globales en el documento
        document.addEventListener('mouseup', dragEnd);
        document.addEventListener('touchend', dragEnd); 
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag); 
        
        // Función para elevar la ventana clicada
        function elevateWindow(clickedWindow) {
            highestZIndex++;
            clickedWindow.style.zIndex = highestZIndex;
        }
        
        /* ==================== INICIO DE INTERACCIÓN (Arrastre) ==================== */

        function startInteraction(e) {
            if (e.target.classList.contains('resize-handle')) {
                return;
            }
            
            e.preventDefault(); 
            isResizing = false;
            
            const isTouch = e.type.includes('touch');
            const eventClientX = isTouch ? e.touches[0].clientX : e.clientX;
            const eventClientY = isTouch ? e.touches[0].clientY : e.clientY;

            activeItem = this; 
            activeItem.classList.add('active-drag');
            
            elevateWindow(activeItem);
            
            const rect = activeItem.getBoundingClientRect();
            
            xOffset = eventClientX - rect.left;
            yOffset = eventClientY - rect.top;
            
            initialX = eventClientX;
            initialY = eventClientY;
        }
        
        /* ==================== INICIO DE REDIMENSIÓN ==================== */

        function resizeStart(e) {
            e.preventDefault();
            
            isResizing = true;
            const isTouch = e.type.includes('touch');
            
            activeItem = this.closest('.window');
            activeItem.classList.add('active-resize');
            elevateWindow(activeItem);

            initialX = isTouch ? e.touches[0].clientX : e.clientX;
            initialY = isTouch ? e.touches[0].clientY : e.clientY;

            initialWidth = activeItem.offsetWidth;
            initialHeight = activeItem.offsetHeight;

            // Obtener la proporción de aspecto dinámica (Ancho / Alto del body de la ventana)
            initialRatio = parseFloat(activeItem.getAttribute('data-aspect-ratio'));
            
            if (isNaN(initialRatio)) {
                // Fallback de seguridad, aunque initializeWindow() debería haberlo establecido
                initialRatio = initialWidth / initialHeight;
            }
        }


        /* ==================== FUNCIÓN DE MOVIMIENTO (DRAG/RESIZE) ==================== */

        function drag(e) {
            if (!activeItem) return;
            e.preventDefault();

            const isTouch = e.type.includes('touch');
            const eventClientX = isTouch ? e.touches[0].clientX : e.clientX;
            const eventClientY = isTouch ? e.touches[0].clientY : e.clientY;
            
            // Altura de la barra de título (aproximadamente 31px)
            const HEADER_HEIGHT = 31; 

            if (isResizing) {
                // Modo Redimensión
                const deltaX = eventClientX - initialX;
                const deltaY = eventClientY - initialY;
                
                let newWidth, newBodyHeight;
                
                // Opción 1: Guiar por el ancho (más común)
                newWidth = Math.max(initialWidth + deltaX, 150);
                
                // La altura del BODY de la ventana se calcula en base al nuevo ancho y la proporción de la imagen
                newBodyHeight = newWidth / initialRatio;

                // El alto total de la ventana es el alto del body + el alto del header
                let newHeight = newBodyHeight + HEADER_HEIGHT;

                // Opción 2: Si el usuario está moviendo más el alto que el ancho, guiar por el alto.
                if (Math.abs(deltaY) > Math.abs(deltaX)) {
                    newHeight = Math.max(initialHeight + deltaY, 100);
                    newBodyHeight = newHeight - HEADER_HEIGHT;
                    
                    if (newBodyHeight > 0) {
                        newWidth = newBodyHeight * initialRatio;
                    }
                }
                
                // Aplicar el nuevo tamaño, asegurando los mínimos
                if (newWidth >= 150 && newHeight >= 100) {
                    activeItem.style.width = newWidth + 'px';
                    activeItem.style.height = newHeight + 'px';
                }

            } else {
                // Modo Arrastre
                currentX = eventClientX - xOffset;
                currentY = eventClientY - yOffset;
                
                activeItem.style.left = currentX + 'px';
                activeItem.style.top = currentY + 'px';
            }
        }


        /* ==================== FUNCIÓN DE FINALIZACIÓN ==================== */

        function dragEnd(e) {
            if (!activeItem) return;

            activeItem.classList.remove('active-drag', 'active-resize');
            
            activeItem = null;
            isResizing = false;
        }

        // Llamada inicial para asegurar que todas las imágenes se inicialicen
        window.addEventListener('load', () => {
            draggableElements.forEach(item => initializeWindow(item));
        });
    </script>
    </body>
</html>
