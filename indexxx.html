<!DOCTYPE html>
<html lang='en'>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.6">

    <title>ANGELA QUÉ HACES</title>

    <link rel="icon" href="assets/Iconfactory-Copland-5-A-rose-for-K..32.png">
    <link rel="stylesheet" type="text/css" href="style.css"> 

    <style>
        /* CONFIGURACIÓN BASE Y ANCHO TOTAL */
        body {
            /* Importante para que las ventanas position: absolute; se muevan respecto a todo el body */
            position: relative; 
            overflow-x: hidden; 
            background-size: cover;
            background-repeat: no-repeat;
            
            font-family: Arial, sans-serif;
            line-height: 1.5;
            font-size: 1em;
            margin: 15;
            /* Se necesita un gran padding/margen inferior para que las ventanas puedan moverse hasta abajo */
            padding-bottom: 2000px; 
        }

        /* EL CONTENEDOR OCUPA EL 100% DEL ANCHO */
        .container {
            max-width: 100%;
            width: 100%;
            margin: 0px 0;
            padding: 10px;
        }

        /* ESTILOS DE ENLACES */
        a {
            color: #0000ff;
            letter-spacing: -0.3px;
            text-decoration: underline;
        }
        
        .wavy-underline {
            text-decoration-style: wavy;
        }
        
        /* CABECERA Y CONTACTO (ALINEACIÓN DERECHA) */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            width: 100%;
            margin-bottom: 40px;
        }

        .main-info p {
            margin: 0;
        }

        .contact-info {
            text-align: right;
            line-height: 1.5;
        }
        
        .contact-info p {
             color: #0000ff;
             font-size: 1em;
             margin: 0;
             white-space: nowrap; 
        }
        
        /* ESTILO PARA LA LÍNEA DIVISORIA */
        hr.project-divider {
            border: none;
            border-top: 1px solid #ccc; 
            margin: 40px 0;
        }
        
        /* === ESTILOS PARA LAS VENTANAS FLOTANTES === */
        
        /* Estilo para el título "Highlights Lately" */
        .highlights-title {
            font-size: 1.8em;
            margin-bottom: 20px;
        }
        
        .window {
            /* Permite moverlas libremente */
            position: absolute; 
            
            /* Les da un tamaño inicial. */
            width: 300px; 
            min-width: 150px; /* Tamaño mínimo */
            min-height: 100px;
            
            background-color: #f0f0f0; 
            border: 1px solid #333;
            box-shadow: 5px 5px 0px #888; 
            z-index: 100;
            
            /* Desactiva el cambio de tamaño por CSS, lo manejamos con el JS */
            resize: none; 
            overflow: hidden; /* Oculta el contenido si es muy grande */
        }

        .window-header {
            /* Área que se puede arrastrar */
            cursor: move; 
            
            background-color: #ccc;
            color: #000;
            padding: 5px 10px;
            font-weight: bold;
            border-bottom: 1px solid #333;
            user-select: none;
        }

        .window-body {
            padding: 5px;
            height: calc(100% - 31px); /* Resta la altura del header (aprox 31px) */
            overflow: hidden;
        }

        .window-body img {
            /* La imagen ocupa todo el cuerpo de la ventana */
            display: block;
            width: 100%;
            height: 100%; /* CLAVE: Para que se redimensione dentro del body */
            object-fit: contain; /* Para que la imagen se ajuste sin cortarse */
        }
        
        /* Asa para redimensionar */
        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 15px;
            height: 15px;
            background: #333;
            cursor: nwse-resize; /* Cursor de redimensionamiento */
            z-index: 10;
        }

        /* Clase para elevar la ventana que se está moviendo */
        .active-drag, .active-resize {
            z-index: 1000;
        }
        /* ============================================== */

    </style>

</head>

<body>
    <main class="container">

        <header class="header">
            <div class="main-info">
                <a href="https://www.instagram.com/angelaquehaces" target="_blank">Ángela Castillo Ferrero</a>
                <p>Jewelry / Fashion Accessories designer</p>
                <p>Based in Barcelona</p>
                <p>Full PDF available upon <u class="wavy-underline">request</u></p>
            </div>

            <div class="contact-info">
                <p>castillofereroangela(at)gmail(dot)com +34 686 646 684</p>
            </div>
        </header>
        
        <hr class="project-divider">
        
        <h2 class="highlights-title">Highlights Lately</h2>
        
        <div class="highlights-container">
            
            <div class="highlight-item window" id="item-1" style="top: 200px; left: 20px; height: 400px; width: 300px;">
                <div class="window-header">Twist Capsule I</div>
                <div class="window-body">
                    <img 
                        src="https://d2w9rnfcy7mm78.cloudfront.net/40812628/original_172a35df3b3170e2a010826f4a9fe9b0.png?1762184347?bc=0" 
                        alt="Destacado 1: Twist Capsule">
                </div>
                <div class="resize-handle"></div>
            </div>

            <div class="highlight-item window" id="item-2" style="top: 100px; left: 35%; height: 500px; width: 380px;">
                <div class="window-header">Twist Capsule II</div>
                <div class="window-body">
                    <img 
                        src="https://d2w9rnfcy7mm78.cloudfront.net/40812625/original_85f18373dedff59799d870842540b485.png?1762184345?bc=0" 
                        alt="Destacado 2: Twist Capsule">
                </div>
                <div class="resize-handle"></div>
            </div>

            <div class="highlight-item window" id="item-3" style="top: 300px; left: 65%; height: 350px; width: 250px;">
                <div class="window-header">Twist Capsule III</div>
                <div class="window-body">
                    <img 
                        src="https://d2w9rnfcy7mm78.cloudfront.net/40812631/original_19f7e92dfe38cfa2b98cf28f4ba0f9c4.png?1762184353?bc=0" 
                        alt="Destacado 3: Twist Capsule">
                </div>
                <div class="resize-handle"></div>
            </div>
        </div>
        </main>

    <footer class="footer container">
        <p class="last-updated" style="text-align: right;">last updated: 03/nov/25</p>
    </footer>
    
    <script>
        const draggableElements = document.querySelectorAll('.window');
        
        let activeItem = null; 
        let isResizing = false; // Nueva variable para controlar la redimensión
        
        let currentX, currentY; 
        let initialX, initialY; 
        let xOffset = 0, yOffset = 0;
        
        let initialWidth, initialHeight; // Variables para la redimensión

        let highestZIndex = 100;

        // 1. Configuración de escuchadores de eventos
        draggableElements.forEach(item => {
            const header = item.querySelector('.window-header');
            const resizeHandle = item.querySelector('.resize-handle');
            
            // Arrastre (Header)
            if (header) {
                header.addEventListener('mousedown', dragStart);
                header.addEventListener('touchstart', dragStart); 
            }
            
            // Redimensión (Handle)
            if (resizeHandle) {
                resizeHandle.addEventListener('mousedown', resizeStart);
                resizeHandle.addEventListener('touchstart', resizeStart);
            }

            // Elevar al hacer clic
            item.addEventListener('mousedown', elevateWindow);
            item.addEventListener('touchstart', elevateWindow);
        });

        // Eventos globales en el documento
        document.addEventListener('mouseup', dragEnd);
        document.addEventListener('touchend', dragEnd); 
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag); 
        
        // Función para elevar la ventana clicada
        function elevateWindow(e) {
            const clickedWindow = e.target.closest('.window');
            if (clickedWindow) {
                highestZIndex++;
                clickedWindow.style.zIndex = highestZIndex;
            }
        }
        
        /* ==================== FUNCIONES DE ARRASTRE ==================== */

        function dragStart(e) {
            e.preventDefault(); 
            isResizing = false; // Asegura que no estemos en modo redimensión
            
            const isTouch = e.type.includes('touch');
            const eventClientX = isTouch ? e.touches[0].clientX : e.clientX;
            const eventClientY = isTouch ? e.touches[0].clientY : e.clientY;

            activeItem = this.closest('.window');
            activeItem.classList.add('active-drag'); // Estilo de arrastre
            
            // Reajusta las coordenadas del desplazamiento
            xOffset = activeItem.offsetLeft;
            yOffset = activeItem.offsetTop;

            initialX = eventClientX - xOffset;
            initialY = eventClientY - yOffset;
        }
        
        /* ==================== FUNCIONES DE REDIMENSIÓN ==================== */

        function resizeStart(e) {
            e.preventDefault();
            
            isResizing = true;
            const isTouch = e.type.includes('touch');
            const eventClientX = isTouch ? e.touches[0].clientX : e.clientX;
            const eventClientY = isTouch ? e.touches[0].clientY : e.clientY;

            activeItem = this.closest('.window');
            activeItem.classList.add('active-resize'); // Estilo de redimensión
            
            // Posición inicial del ratón
            initialX = eventClientX;
            initialY = eventClientY;

            // Dimensiones iniciales del elemento
            initialWidth = activeItem.offsetWidth;
            initialHeight = activeItem.offsetHeight;
        }


        /* ==================== FUNCIÓN DE MOVIMIENTO (DRAG/RESIZE) ==================== */

        function drag(e) {
            if (!activeItem) return;
            e.preventDefault();

            const isTouch = e.type.includes('touch');
            const eventClientX = isTouch ? e.touches[0].clientX : e.clientX;
            const eventClientY = isTouch ? e.touches[0].clientY : e.clientY;

            if (isResizing) {
                // Modo Redimensión
                const deltaX = eventClientX - initialX;
                const deltaY = eventClientY - initialY;

                // Calcula el nuevo tamaño, respetando el mínimo
                const newWidth = Math.max(initialWidth + deltaX, parseInt(activeItem.style.minWidth) || 150);
                const newHeight = Math.max(initialHeight + deltaY, parseInt(activeItem.style.minHeight) || 100);

                activeItem.style.width = newWidth + 'px';
                activeItem.style.height = newHeight + 'px';

            } else {
                // Modo Arrastre
                currentX = eventClientX - initialX;
                currentY = eventClientY - initialY;

                setTranslate(currentX, currentY, activeItem);
            }
        }


        /* ==================== FUNCIÓN DE FINALIZACIÓN (DRAG/RESIZE) ==================== */

        function dragEnd(e) {
            if (!activeItem) return;

            activeItem.classList.remove('active-drag', 'active-resize');

            if (!isResizing) {
                // Modo Arrastre: aplica la posición final
                activeItem.style.left = currentX + 'px';
                activeItem.style.top = currentY + 'px';
                activeItem.style.transform = 'translate3d(0, 0, 0)'; 
            }
            
            // Resetea las variables de control
            activeItem = null;
            isResizing = false;
        }

        // Función de utilidad para aplicar la posición con transform
        function setTranslate(xPos, yPos, el) {
            el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
        }
    </script>
    </body>
</html>
